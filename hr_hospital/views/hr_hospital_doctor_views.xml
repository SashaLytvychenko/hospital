<odoo>
    <record id='hr_hospital_doctor_tree' model='ir.ui.view'>
        <field name='name'>hr.hospital.doctor.tree ()</field>
        <field name='model'>hr.hospital.doctor</field>
        <field name='arch' type='xml'>
            <tree>
                <field name='surname_name'/>
                <field name='gender'/>
                <field name='specialization'/>
            </tree>
        </field>
    </record>


    <record id="hr_hospital_doctor_print_disease_report"
            model="ir.actions.server">
        <field name="name">Print Disease Report</field>
        <field name="model_id" ref="model_hr_hospital_doctor"/>
        <field name="binding_model_id" ref="model_hr_hospital_doctor"/>
        <field name="state">code</field>
        <field name="code">
            action = {
            'type': 'ir.actions.act_window',
            'res_model': 'hr.hospital.disease.report.wizard',
            'view_mode': 'form',
            'target': 'new',
            }
        </field>
    </record>


    <record id='hr_hospital_doctor_form' model='ir.ui.view'>
        <field name='name'>hr.hospital.doctor.form ()</field>
        <field name='model'>hr.hospital.doctor</field>
        <field name='arch' type='xml'>
            <form>
                <header>
                    <button name="%(hr_hospital_doctor_print_disease_report)d"
                            string="Print Disease Report" type="action"
                            class="btn btn-primary"/>
                </header>
                <sheet>
                    <field name='image' widget='image' class='oe_avatar'/>
                    <group>
                        <group>
                            <field name='surname_name'/>
                            <field name='phone'/>
                            <field name='is_intern'/>
                            <field name="doctor_mentor_id"
                                   invisible="is_intern == False"/>
                        </group>
                        <group>
                            <field name='email'/>
                            <field name='specialization'/>
                            <field name='gender'/>
                        </group>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <record id='hr_hospital_doctor_search' model='ir.ui.view'>
        <field name='name'>hr.hospital.doctor.search</field>
        <field name='model'>hr.hospital.doctor</field>
        <field name='arch' type='xml'>
            <search>
                <filter string="Doctor mentor"
                        name="doctor_mentor"
                        domain="[('is_intern','=',False)]"
                        help='This filter help you find doctor mentor'/>
                <separator/>
                <filter string="Doctor intern"
                        name="doctor_mentor"
                        domain="[('is_intern','=',True)]"
                        help='This filter help you find doctor intern'/>
            </search>
        </field>
    </record>


    <record id='hr_hospital_doctor_kanban' model='ir.ui.view'>
        <field name='name'>hr.hospital.doctor.kanban</field>
        <field name='model'>hr.hospital.doctor</field>
        <field name='arch' type='xml'>
            <kanban class="o_kanban_mobile" default_group_by='specialization'
                    records_draggable="False"
                    quick_create_view="hr_hospital.hr_hospital_doctor_form">
                <templates>
                    <t t-name="kanban-box">
                        <div t-attf-class="oe_kanban_content oe_kanban_global_click">
                            <div>
                                <strong class="o_kanban_record_title">
                                    <field name='surname_name'/>
                                </strong>
                            </div>
                            <div>
                                <a type="action" class="btn btn-primary"
                                   t-att-data-id="record.id.raw_value"
                                   t-attf-onclick="do_action('action_create_visit',
                                   {'additional_context': {'doctor_id': record.id.raw_value}})">
                                    Записати пацієнта
                                </a>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>


    <record id="action_create_visit" model="ir.actions.server">
        <field name="name">Create Quick Visit</field>
        <field name="model_id" ref="model_hr_hospital_doctor"/>
        <field name="binding_model_id" ref="model_hr_hospital_doctor"/>
        <field name="state">code</field>
        <field name="code">
            action = env['hr.hospital.patient.visit'].action_create_visit(doctor_id=record.id)
        </field>
    </record>


    <record id='action_hr_hospital_doctor_window'
            model='ir.actions.act_window'>
        <field name='name'>Doctor</field>
        <field name='type'>ir.actions.act_window</field>
        <field name='res_model'>hr.hospital.doctor</field>
        <field name='view_mode'>tree,form,kanban</field>
    </record>

    <menuitem id='hr_hospital_doctor'
              action='action_hr_hospital_doctor_window'
              parent='hr_hospital_main_menu'
              name='Doctor' sequence='200'/>
</odoo>



